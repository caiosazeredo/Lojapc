{% extends "base.html" %}

{% block title %}Checkout - PixelCraft PC{% endblock %}

{% block content %}
<section class="checkout-page">
    <div class="container">
        <h1>Finalizar <span class="gradient-text">Compra</span></h1>
        
        <div class="checkout-content">
            <div class="checkout-form">
                <form method="POST" action="/process-order">
                    <!-- Personal Info -->
                    <div class="form-section">
                        <h3>Dados Pessoais</h3>
                        <div class="form-grid">
                            <div class="form-group">
                                <label>Nome Completo</label>
                                <input type="text" name="name" required>
                            </div>
                            <div class="form-group">
                                <label>E-mail</label>
                                <input type="email" name="email" required>
                            </div>
                            <div class="form-group">
                                <label>CPF</label>
                                <input type="text" name="cpf" required>
                            </div>
                            <div class="form-group">
                                <label>Telefone</label>
                                <input type="tel" name="phone" required>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Delivery Address -->
                    <div class="form-section">
                        <h3>Endereço de Entrega</h3>
                        <div class="form-grid">
                            <div class="form-group">
                                <label>CEP</label>
                                <input type="text" name="cep" required onblur="buscarCEP(this.value)">
                            </div>
                            <div class="form-group col-span-2">
                                <label>Rua</label>
                                <input type="text" name="street" required>
                            </div>
                            <div class="form-group">
                                <label>Número</label>
                                <input type="text" name="number" required>
                            </div>
                            <div class="form-group">
                                <label>Complemento</label>
                                <input type="text" name="complement">
                            </div>
                            <div class="form-group">
                                <label>Bairro</label>
                                <input type="text" name="neighborhood" required>
                            </div>
                            <div class="form-group">
                                <label>Cidade</label>
                                <input type="text" name="city" required>
                            </div>
                            <div class="form-group">
                                <label>Estado</label>
                                <select name="state" required>
                                    <option value="RJ">Rio de Janeiro</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Services -->
                    <div class="form-section">
                        <h3>Serviços Adicionais</h3>
                        <label class="checkbox-label">
                            <input type="checkbox" name="setup_service" value="1">
                            <span>
                                <i class="fas fa-tools"></i>
                                Configuração em domicílio (+R$ 150,00)
                                <small>Nosso técnico vai até sua casa configurar o PC</small>
                            </span>
                        </label>
                    </div>
                    
                    <!-- Payment -->
                    <div class="form-section">
                        <h3>Forma de Pagamento</h3>
                        <div class="payment-options">
                            <label class="payment-option">
                                <input type="radio" name="payment" value="pix" checked>
                                <div class="option-content">
                                    <i class="fas fa-qrcode"></i>
                                    <span>PIX (5% desconto)</span>
                                </div>
                            </label>
                            <label class="payment-option">
                                <input type="radio" name="payment" value="card">
                                <div class="option-content">
                                    <i class="fas fa-credit-card"></i>
                                    <span>Cartão (até 12x)</span>
                                </div>
                            </label>
                            <label class="payment-option">
                                <input type="radio" name="payment" value="boleto">
                                <div class="option-content">
                                    <i class="fas fa-barcode"></i>
                                    <span>Boleto</span>
                                </div>
                            </label>
                        </div>
                    </div>
                    
                    <button type="submit" class="btn btn-primary btn-lg btn-block">
                        <i class="fas fa-lock"></i> Finalizar Pedido
                    </button>
                </form>
            </div>
            
            <!-- Order Summary -->
            <div class="order-summary">
                <h3>Resumo do Pedido</h3>
                <div class="summary-items">
                    {% for item in cart %}
                    <div class="summary-item">
                        <img src="{{ item.image }}" alt="{{ item.name }}">
                        <div>
                            <strong>{{ item.name }}</strong>
                            <small>Qtd: {{ item.quantity }}</small>
                        </div>
                        <span>R$ {{ (item.price * item.quantity)|currency }}</span>
                    </div>
                    {% endfor %}
                </div>
                
                <hr>
                
                <div class="summary-totals">
                    <div class="total-line">
                        <span>Subtotal</span>
                        <span>R$ {{ total|currency }}</span>
                    </div>
                    <div class="total-line">
                        <span>Frete</span>
                        <span id="shipping">Grátis</span>
                    </div>
                    <div class="total-line" id="setup-fee" style="display:none">
                        <span>Configuração</span>
                        <span>R$ 150,00</span>
                    </div>
                    <hr>
                    <div class="total-line total">
                        <strong>Total</strong>
                        <strong id="final-total">R$ {{ total|currency }}</strong>
                    </div>
                </div>
                
                <div class="security-badges">
                    <img src="/static/img/ssl-secure.png" alt="SSL Secure">
                    <img src="/static/img/pci-compliant.png" alt="PCI Compliant">
                </div>
            </div>
        </div>
    </div>
</section>
{% endblock %}