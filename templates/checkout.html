{% extends "base.html" %}
{% block content %}
<section class="checkout-page">
    <div class="container">
        <h1>Finalizar <span class="gradient-text">Compra</span></h1>
        
        <form method="POST" action="{{ url_for('process_order') }}">
            <div class="checkout-content">
                <div class="checkout-form">
                    <h3>Dados Pessoais</h3>
                    <div class="form-group">
                        <label>Nome Completo</label>
                        <input type="text" name="name" required value="{{ customer.name if customer else '' }}">
                    </div>
                    <div class="form-group">
                        <label>E-mail</label>
                        <input type="email" name="email" required value="{{ customer.email if customer else '' }}">
                    </div>
                    <div class="form-group">
                        <label>CPF</label>
                        <input type="text" name="cpf" required value="{{ customer.cpf if customer else '' }}">
                    </div>
                    <div class="form-group">
                        <label>Telefone</label>
                        <input type="tel" name="phone" required value="{{ customer.phone if customer else '' }}">
                    </div>
                    
                    <h3>Endereço de Entrega</h3>
                    <div class="form-group">
                        <label>CEP</label>
                        <input type="text" name="cep" required>
                    </div>
                    <div class="form-group">
                        <label>Rua</label>
                        <input type="text" name="street" required>
                    </div>
                    <div class="form-group">
                        <label>Número</label>
                        <input type="text" name="number" required>
                    </div>
                    <div class="form-group">
                        <label>Bairro</label>
                        <input type="text" name="neighborhood" required>
                    </div>
                    <div class="form-group">
                        <label>Cidade</label>
                        <input type="text" name="city" required value="Rio de Janeiro">
                    </div>
                    <div class="form-group">
                        <label>Estado</label>
                        <input type="text" name="state" required value="RJ">
                    </div>
                    
                    <h3>Forma de Pagamento</h3>
                    <div class="payment-options">
                        <label>
                            <input type="radio" name="payment" value="pix" checked>
                            PIX (5% desconto)
                        </label>
                        <label>
                            <input type="radio" name="payment" value="card">
                            Cartão (até 12x)
                        </label>
                        <label>
                            <input type="radio" name="payment" value="boleto">
                            Boleto
                        </label>
                    </div>
                    
                    <label>
                        <input type="checkbox" name="setup_service" value="1">
                        Configuração em domicílio (+R$ 150,00)
                    </label>
                    
                    <button type="submit" class="btn btn-primary btn-lg btn-block">
                        <i class="fas fa-lock"></i> Finalizar Pedido
                    </button>
                </div>
                
                <div class="order-summary">
                    <h3>Resumo</h3>
                    {% for item in cart %}
                    <div class="summary-item">
                        <span>{{ item.name }} ({{ item.quantity }}x)</span>
                        <span>R$ {{ "%.2f"|format(item.price * item.quantity)|replace(".", ",") }}</span>
                    </div>
                    {% endfor %}
                    <hr>
                    <div class="summary-total">
                        <strong>Total</strong>
                        <strong>R$ {{ "%.2f"|format(total)|replace(".", ",") }}</strong>
                    </div>
                </div>
            </div>
        </form>
    </div>
</section>
{% endblock %}